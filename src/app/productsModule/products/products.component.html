<div class="products-page">
  <div class="header-with-action">
    <h2 class="page-title">Products</h2>
    <button class="btn add-btn" (click)="openModal(productModal); newProduct(true)">
      <i class="bi bi-plus-lg"></i> <!-- Bootstrap Icons -->
    </button>
  </div>

  <div class="table-wrapper">
    <table class="custom-table">
      <thead>
        <tr>
          <th>Name</th>
          <th>Brand</th>
          <th>Size</th>
          <th>Price</th>
          <th>Actions</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let product of products">
          <td>{{ product.name }}</td>
          <td>{{ product.brand }}</td>
          <td>{{ product.size }}</td>
          <td>{{ product.price | currency:'INR' }}</td>
          <td>
            <button class="btn edit" (click)="prefillModal(product, productModal)">
              Edit
            </button>
            <!-- <button class="btn delete" (click)="deleteProduct(product.id)">Delete</button> -->

             <button class="btn delete" (click)="openConfirmModal(confirmModal, product.id)">Delete</button>            
          </td>
        </tr>
      </tbody>
    </table>
  </div>
</div>

<!-- product.component.html -->
<ng-template #productModal let-modal>
  <div class="modal-header custom-modal-header">
    <h5 class="modal-title">Product Modal</h5>
    <button type="button" class="btn-close" aria-label="Close" (click)="modal.dismiss()"></button>
  </div>

  <div class="modal-body">
    <form [formGroup]="productForm">
      <div class="mb-3">
        <label class="form-label">Name</label>
        <input type="text" formControlName="name" class="form-control"/>
      </div>
      <div class="mb-3">
        <label class="form-label">Brand</label>
        <input type="text" formControlName="brand" class="form-control" />
      </div>
      <div class="mb-3">
        <label class="form-label">Size</label>
        <input type="text" formControlName="size" class="form-control" />
      </div>
      <div class="mb-3">
        <label class="form-label">Price</label>
        <input type="number" formControlName="price" class="form-control" />
      </div>
    </form>
  </div>

  <div class="modal-footer">
    <button type="button" class="btn btn-secondary" (click)="modal.dismiss()">Close</button>
    <button type="button" class="btn btn-primary" [disabled]="productForm.invalid" (click)="saveUpdateProduct()">Save</button>
  </div>
</ng-template>


<!-- Confirmation Modal Template -->
<ng-template #confirmModal let-modal>
  <div class="modal-header">
    <h5 class="modal-title">Confirm Delete</h5>
    <button type="button" class="btn-close" aria-label="Close" (click)="modal.dismiss()"></button>
  </div>
  <div class="modal-body">
    Are you sure you want to delete this record?
  </div>
  <div class="modal-footer">
    <button class="btn btn-secondary" (click)="modal.dismiss()">Cancel</button>
    <button class="btn btn-danger" (click)="modal.close('yes')">Delete</button>
  </div>
</ng-template>
